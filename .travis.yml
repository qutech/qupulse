language: python
python:
  - 3.6
  - 3.7
  - 3.8
  - 3.9
env:
  - INSTALL_EXTRAS=[plotting,zurich-instruments,tektronix,tabor-instruments]
  - INSTALL_EXTRAS=[plotting,zurich-instruments,tektronix,tabor-instruments,Faster-fractions]

# Ubuntu 20.04 LTS
dist: focal

# these directories are persistent
cache: pip

# install dependencies for gmpy2
addons:
  apt:
    update: true

    packages:
      - libgmp-dev
      - libmpfr-dev
      - libmpc-dev

before_install:
  - pip install coverage coveralls
install:
  - pip install .$INSTALL_EXTRAS
script:
  - "coverage run --source=qupulse --rcfile=coverage.ini -m pytest"
after_success:
  - coveralls

notifications:
  email: false
